<!-- Right side column. Contains the navbar and content of the page -->
<aside class="right-side">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1><?php _e('Licenses'); ?><small> <?php _e('Manage licenses'); ?></small></h1>
        <ol class="breadcrumb"><li><a href="?route=dashboard"><i class="fa fa-dashboard"></i> <?php _e('Home'); ?></a></li><li><?php _e('Sam'); ?></li><li><a href="?route=sam/licenses"><?php _e('Licenses'); ?></a></li><li class="active"><?php _e('Create'); ?></li></ol>
    </section>

    <!-- Main content -->
    <section class="content">
        <?php if(!empty($statusmessage)): ?>
        <div class="row"><div class='col-md-12'><div class="alert alert-<?php print $statusmessage["type"]; ?> alert-auto" role="alert"><?php print __($statusmessage["message"]); ?></div></div></div>
        <?php endif; ?>
        <div class="row">
            <div class="col-xs-12">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title"><?php _e('Create New License'); ?></h3>
                    </div><!-- /.box-header -->
                    <div class="box-body">
                        <div class="container-fluid">
                            <div class="row">
                                <form role="form" method="post">

                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="application_name"><?php _e('Application Name *');?></label>
                                                    <input type="text" class="form-control" id="application_name" name="application_name" required>
                                                    
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="supplierid"><?php _e('Supplier Name'); ?> </label>
                                                    <input type="text" class="form-control" id="suplier_name" name="suplier_name">
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label for="edition"><?php _e('Edition'); ?> </label>
                                                    <input type="text" class="form-control" id="edition" name="edition">
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="purchase_date"><?php _e('Purchase Date'); ?></label>                                                    
                                                    <input type="date" class="form-control" id="purchase_date" name="purchase_date">
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="status"><?php _e('Status'); ?> </label>
                                                    <select class="form-control select2 select2-hidden-accessible" id="status" name="status" style="width: 100%;">
                                                        <option value="Active">Active</option>
                                                        <option value="In Stock">In Stock</option>
                                                        <option value="Purchased">Purchased</option>
                                                        <option value="Received">Received</option>
                                                        <option value="Retired">Retired</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label for="category"><?php _e('Category'); ?></label>
                                                    <select class="form-control select2 select2-hidden-accessible" id="category" name="category" style="width: 100%;" tabindex="-1" aria-hidden="true">
                                                        <option value="SW">SW</option>
                                                        <option value="HW">HW</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                
                                                <div class="form-group">
                                                    <label for="contract_num"><?php _e('Contract / Agreement Number'); ?></label>
                                                    
                                                    <input type="text" class="form-control" id="contract_num" name="contract_num" >
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="amount"><?php _e('Amount'); ?></label>
                                                    
                                                    <input type="text" class="form-control" id="amount" name="amount" >
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label for="purchase_quantity"><?php _e('Purchase Qunatity'); ?> </label>
                                                    <input type="text" class="form-control" id="purchase_quantity" name="purchase_quantity" >
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="purchase_order_number"><?php _e('Purchase Order Number'); ?></label>
                                                   
                                                    <input type="text" class="form-control" id="purchase_order_number" name="purchase_order_number" >
                                                </div>
                                             </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="cost_center"><?php _e('Cost Center'); ?> </label>
                                                    <input type="text" class="form-control" id="cost_center" name="cost_center" >
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label for="business_unit"><?php _e('Business Unit'); ?> </label>
                                                    <input type="text" class="form-control" id="business_unit" name="business_unit" >
                                                </div>
                                            </div>
                                         </div>


                                    </div>

                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label for="version"><?php _e('Version'); ?></label>
                                                    <input type="text" class="form-control" id="version" name="version">
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="license_typeid"><?php _e('License Type'); ?></label>
                                                    <select class="form-control select2 select2-hidden-accessible" id="license_typeid" name="license_typeid" style="width: 100%;" tabindex="-1" aria-hidden="true">
                                                        <option value="0"><?php _e('None'); ?></option>
                                                        <?php foreach ($license_type2 as $license) { echo "<option value='".$license['id']."'>".$license['license_type']."</option>"; } ?>
                                                    </select>
                                                    
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="purchase_type"><?php _e('Purchase Type'); ?></label>
                                                    <select class="form-control select2 select2-hidden-accessible" id="purchase_type" name="purchase_typeid" style="width: 100%;" tabindex="-1" aria-hidden="true">
                                                        <option value="0"><?php _e('None'); ?></option>
                                                        <?php foreach ($purchase_type as $purchase_type) { echo "<option value='".$purchase_type['id']."'>".$purchase_type['name']."</option>"; } ?>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label for="license_start_date"><?php _e('License Start Date'); ?></label>
                                                    <input type="date" class="form-control" id="license_start_date" name="license_start_date">
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="license_expiry_date"><?php _e('License Expiry Date'); ?></label>
                                                    <input type="date" class="form-control" id="license_expiry_date" name="license_expiry_date">
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="serial"><?php _e('Serial Number'); ?></label>
                                                    
                                                    <input type="text" class="form-control" id="serial" name="serial" >
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label for="vendor_name"><?php _e('Vendor Name'); ?></label>
                                                    <input type="text" class="form-control" id="vendor_name" name="vendor_name">
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="part_number"><?php _e('Part Number ./SKU'); ?></label>
                                                    <input type="text" class="form-control" id="part_number" name="part_number">
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="qunatity_per_unit"><?php _e('Quantity per unit'); ?></label>
                                                    
                                                    <input type="text" class="form-control" id="qunatity_per_unit" name="qunatity_per_unit" >
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <div class="form-group">
                                                    <label for="owner_name"><?php _e('Owner Name'); ?></label>
                                                    <input type="text" class="form-control" id="owner_name" name="owner_name">
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="project_id"><?php _e('Project ID'); ?></label>
                                                    <input type="text" class="form-control" id="project_id" name="project_id">
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="location"><?php _e('Location'); ?></label>
                                                    
                                                    <input type="text" class="form-control" id="location" name="location" >
                                                </div>
                                            </div>

                                            <?php foreach($customfields as $customfield) { ?>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label><?php echo $customfield['name'] ?></label>

                                                    <?php if($customfield['type'] == "Text Box") { ?>
                                                    <input type="text" class="form-control" name="<?php echo $customfield['id']; ?>">
                                                    <?php } ?>

                                                    <?php if($customfield['type'] == "Text Area") { ?>
                                                    <textarea class="form-control" name="<?php echo $customfield['id']; ?>"></textarea>
                                                    <?php } ?>

                                                    <?php if($customfield['type'] == "Dropdown") { $options = explode(",",$customfield['options']); ?>
                                                    <select class="form-control select2 select2-hidden-accessible" name="<?php echo $customfield['id']; ?>" style="width: 100%;" tabindex="-1" aria-hidden="true">
                                                        <?php foreach ($options as $option) { echo "<option value='".$option."'>".$option."</option>"; } ?>
                                                    </select>
                                                    <?php } ?>

                                                    <?php if($customfield['description'] != "") { ?>
                                                    <p class="help-block"><?php echo $customfield['description']; ?></p>
                                                    <?php } ?>
                                                </div>
                                            </div>

                                            <?php } ?>


                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label for="notes"><?php _e('Notes'); ?></label>
                                                <textarea class="form-control summernoteLarge" rows="5" id="notes" name="notes"></textarea>
                                            </div>
                                        
                                            <input type="hidden" name="action" value="addLicense">
                                            <input type="hidden" name="route" value="sam/licenses">
                                            <input type="hidden" name="routeid" value="">
                                            <input type="hidden" name="type" value="license">
                                        
                                            <div class="form-group">
                                                <button type="submit" class="btn btn-primary"><i class="fa fa-check"></i> <?php _e('Create'); ?></button>
                                            </div>
                                    </div>

                                </form><!-- /.form -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </section><!-- /.content -->
</aside><!-- /.right-side -->
<script type="text/javascript">

    function generateTag(_this) {

        var tagprefix = $(_this).find(':selected').data("tagprefix");
        var tagsufix = '<?php echo License::nextLicenseTag(); ?>';

        document.getElementById("tag").value = tagprefix + tagsufix;
    }

</script>
